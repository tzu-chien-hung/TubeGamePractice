<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¦ŠğŸTina KevinğŸ˜ğŸ’œ</title>
    <link rel="preload" href="./images/pipe.png" as="image" />
    <link rel="preload" href="./images/bg.jpg" as="image" />
    <link rel="preload" href="./images/white_frame.png" as="image" />
    <link rel="preload" href="./images/bg_eff60.png" as="image" />
    <link rel="preload" href="./images/Q1_WB.png" as="image" />
    <link rel="preload" href="./images/title_1.png" as="image" />
    <link rel="preload" href="./images/title_final_1.png" as="image" />
    <link rel="preload" href="./images/su_1.png" as="image" />
    <link rel="preload" href="./images/send_1.png" as="image" />
    <link rel="preload" href="./images/white_frame.png" as="image" />
    <link rel="preload" href="./images/turn.png" as="image" />
    <link rel="stylesheet" href="game.css">
    <link rel="shortcut icon" href="./images/favicon.png" type="image/x-icon">
    <style>
        div.breadcrumbs>ol>li:nth-of-type(3)>a>span {
            color: red;
        }

        .bg_style_ques {
            background-size: cover;
            background-repeat: no-repeat;
            background-position: left;
        }

        .bg_style_ans {
            background-size: cover;
            background-repeat: no-repeat;
            background-position: right;
        }
    </style>
</head>

<body>
    <div class="window">
        <!-- èƒŒæ™¯åœ–ç‰‡å€‘ -->
        <img class="img" src="./images/bg.jpg" alt="">
        <img class="img" src="./images/bg_eff60.png" alt="">
        <img id="tube_bg" src="./images/pipe.png" alt="">
        <img class="img" src="./images/white_frame.png" alt="">
        <div class="page_home">
            <!-- é¦–é åœ–ç‰‡å…§å®¹ -->
            <img id="page_home_ip" src="./images/IP0.gif" alt="">
            <img id="page_home_title_1" src="./images/title_1.png" alt="">
            <img id="page_home_logo" src="./images/logo_1.png" alt="">
            <img id="page_home_btn" src="./images/btn_start.png" alt="">
        </div>
        <div id="qablock">
            <!-- å•é¡Œå®šä½åœ¨è¦–çª—ä¸­å›ºå®šä½ç½® -->
            <div id="ques"></div>
            <div id="ansA"></div>
            <div id="ansB"></div>
            <div id="page_qa_ip"></div>
        </div>
        <div id="firework"><!-- ç­”å°çš„ç…™ç«å‹•ç•«--></div>
        <div id="error"> <!-- ç­”éŒ¯çš„å‹•ç•«-->
            <div id="water"> <!-- ç­”éŒ¯çš„æ°´ç®¡å‹•ç•«-->
                <img src="./images/water2.gif" alt="">
            </div>
            <div id="turn_block"> <!-- ç­”éŒ¯çš„å½ˆçª—å‹•ç•«åŠæ­£ç¢ºç­”æ¡ˆ-->
                <div id="turn_block_img">
                    <img src="./images/turn.png" alt="">
                    <div id="correct_ans"></div>
                </div>
                <div id="turn_block_ip">
                    <img src="./images/IP2.gif" alt="">
                </div>
            </div>

        </div>
    </div>
    <script>
        let page_home_ip = document.getElementById('page_home_ip');
        let page_qa_ip = document.getElementById('page_qa_ip');
        let page_home_title_1 = document.getElementById('page_home_title_1');
        let page_home_logo = document.getElementById('page_home_logo');
        let page_home_btn = document.getElementById('page_home_btn');
        let tube_bg = document.getElementById('tube_bg');
        let ques = document.getElementById('ques');
        let ansA = document.getElementById('ansA');
        let ansB = document.getElementById('ansB');
        let qaArrayIndex = 0;
        let randomQaArray = [];
        let firework = document.getElementById('firework');
        let error = document.getElementById('error');
        let water = document.getElementById('water');
        let correct_ans = document.getElementById('correct_ans');
        let turn_block_img = document.getElementById('turn_block_img');
        let pathArrayIndex = 0
        let setPathArray = [{
            i: "S1",
            a: ["x: 1051", "y:-392", "2"],
            sa: ["top:60.2%", "left:-90.1%"],
            b: ["y:-170", "x:-817", "1"],
            sb: ["top:60.2%", "left:54.1%"]
        }, {
            i: "S2",
            a: ["y:-709", "y:-80", "3"],
            sa: ["top:60.2%", "left:11.9%"],
            b: ["y:-395", "x:-803", "y:-394", "x:+803", "3"],
            sb: ["top:60.2%", "left:54%"]
        }, {
            i: "S2",
            a: ["y:-710", "y:-78", "4"],
            sa: ["top:60.2%", "left:11.8%"],
            b: ["y:-395", "x:-803", "y:-393", "x:+803", "4"],
            sb: ["top:60.15%", "left:54%"]
        }, {
            i: "S4",
            a: ["y:-350", "x:+1055", "y:-498", "7"],
            sa: ["top:60.2%", "left:-99.3%"],
            b: ["y:-300", "x:-400", "y:-313", "x:-400", "6"],
            sb: ["top:60.2%", "left:54.3%"]
        }, {
            i: "S5",
            a: ["y:-250", "x:+417", "y:+170", "x:+592", "5"],
            sa: ["top:48.2%", "left:-36.4%"],
            b: ["y:-627", "x:-813", "7"],
            sb: ["top:60.1%", "left:54.1%"]
        }, {
            i: "S6",
            a: ["y:-350", "x:+300", "y:-450", "x:-530", "8"],
            sa: ["top:60.15%", "left:-29.2%"],
            b: ["y:-550", "x:-230", "y:-250", "8"],
            sb: ["top:60.2%", "left:54.15%"]
        }, {
            i: "S7",
            a: ["y:-350", "x:+800", "y:-264", "9"],
            sa: ["top:60.25%", "left:-77.8%"],
            b: ["y:-614", "x:+800", "9"],
            sb: ["top:60.3%", "left:-9.2%"]
        }, {
            i: "S8",
            a: ["y:-253", "x:+1592", "8"],
            sa: ["top:60.25%", "left:-112.4%"],
            b: ["y:-379", "x:-1055", "9"],
            sb: ["top:60.3%", "left:54.25%"]
        }, {
            i: "S9",
            a: ["y:-795", "0"],
            sa: ["top:59.9%", "left:11.67%"],
            b: ["y:-150", "x:-350", "y:-550", "x:+350", "y:-95", "0"],
            sb: ["top:60.2%", "left:54.26%"]
        }, {
            i: "S9",
            a: ["y:-795", "0"],
            sa: ["top:60.2%", "left:11.66%"],
            b: ["y:-150", "x:-350", "y:-550", "x:+350", "y:-95", "0"],
            sb: ["top:60.17%", "left:54.33%"]
        }];

        page_home_btn.addEventListener('click', () => {
            page_home_title_1.classList.add("hidden_title");
            page_home_ip.classList.add("hidden");
            page_home_logo.classList.add("hidden");
            page_home_btn.classList.add("hidden");
            setTimeout((() => {
                page_home_ip.style = "display:none";
                page_home_logo.style = "display:none";
                page_home_btn.style = "display:none";
                page_home_title_1.style = "display:none";
                tube_bg.style = "top:-1120px;left: -2372px"
            }), 1000);
            randomQaArray = Question();
            console.log(randomQaArray);
            setTimeout((() => {
                setQa([randomQaArray, qaArrayIndex]);
                setTimeout((() => {
                    page_qa_ip.setAttribute = ''
                    page_qa_ip.style = "display:block";
                }), 500);
            }), 2000);

            // console.log(e)
        })
        function answerQuestion(e, top, left, AorB) {
            console.log(e.target)
            if (qaArrayIndex < 4) {
                if (e.target.dataset.answer === "T") {
                    // alert('bingoç­”å°äº†')
                    firework.style = "display:block";
                    firework.innerHTML = '<img src="./images/firework.gif" alt=""><img src="./images/testn.gif" alt="">';
                    setTimeout((() => {
                        firework.style = "display:none";
                        // firework.removeAttribute= '<img src="./images/firework.gif" alt=""><img src="./images/testn.gif" alt="">';

                    }), 2000);

                    setTimeout((() => {
                        qaArrayIndex += 1;
                        setQa([randomQaArray, qaArrayIndex])
                        // console.log('111');
                        // console.log(qaArrayIndex)
                    }), 4000);
                    delayMove(top, left, AorB)
                } else if (e.target.dataset.answer === "F") {
                    // alert('QQé¥…é ­')
                    error.style = "display:block";
                    setTimeout((() => {
                        water.style = "display:none";
                        setTimeout((() => {
                            turn_block.style = "display:block";
                        }), 500);
                    }), 2000);
                    // error.style = "display:none";
                }
            } else {
                setTimeout((() => {
                    alert('å…¨éƒ¨éƒ½bingoç­”å°äº†');
                }), 2000);
            }
        }
        const delayMove = (top, left, AorB) => {
            let path = setPathArray[pathArrayIndex][AorB];
            let length = path.length - 1;
            let i = 0
            console.log("???")
            let movePath = setInterval(() => {
                console.log('test')
                if (path[i][0] === "x") {
                    console.log(Number(left.replace("px", "")) + Number(path[i].slice(2, 10)))
                    tube_bg.style.left = (Number(left.replace("px", "")) + Number(path[i].slice(2, 10))) + "px"
                    left = tube_bg.style.left
                    i++
                    if (i === length) {
                        clearInterval(movePath)
                        pathArrayIndex = Number(path[path.length - 1]);
                    }
                } else if (path[i][0] === "y") {
                    console.log(Number(top.replace("px", "")) + Number(path[i].slice(2, 10)))
                    tube_bg.style.top = (Number(top.replace("px", "")) + Number(path[i].slice(2, 10))) + "px"
                    top = tube_bg.style.top
                    i++
                    if (i === length) {
                        clearInterval(movePath)
                        pathArrayIndex = Number(path[path.length - 1]);
                    }
                }
            }, 1000)

        }
        ansA.addEventListener('click', (e) => {
            let top = tube_bg.style.top;
            let left = tube_bg.style.left
            console.log(top, left, '???')
            answerQuestion(e, top, left, "a");
            // delayMove(top,left,"a")
        })
        ansB.addEventListener('click', (e) => {
            let top = tube_bg.style.top;
            let left = tube_bg.style.left
            console.log(top, left, '???')
            answerQuestion(e, top, left, "b")
            // delayMove(top,left,"b")
        })
        // if (i === "T" && (ansa === 'T' || ansb === 'T')) {
        //     å‘å³æ»‘
        // }
        // if(){

        // }else{

        // }
        turn_block_img.addEventListener('click', () => {

        })
    </script>



    <script>
        // let array = ['ans1','ans2'];
        function Question() {
            qaArray = [{
                q: 'QA_Q1',
                a: ['QA_Q1_T', 'QA_Q1_F'],
                f: 'QA_Q1_FT'
            }, {
                q: 'QA_Q2',
                a: ['QA_Q2_T', 'QA_Q2_F'],
                f: 'QA_Q2_FT'
            }, {
                q: 'QA_Q3',
                a: ['QA_Q3_T', 'QA_Q3_F'],
                f: 'QA_Q3_FT'
            }, {
                q: 'QA_Q4',
                a: ['QA_Q4_T', 'QA_Q4_F'],
                f: 'QA_Q4_FT'
            }, {
                q: 'QA_Q5',
                a: ['QA_Q5_T', 'QA_Q5_F'],
                f: 'QA_Q5_FT'
            }, {
                q: 'QA_Q6',
                a: ['QA_Q6_T', 'QA_Q6_F'],
                f: 'QA_Q6_FT'
            }, {
                q: 'QA_Q7',
                a: ['QA_Q7_T', 'QA_Q7_F'],
                f: 'QA_Q7_FT'
            }, {
                q: 'QA_Q8',
                a: ['QA_Q8_T', 'QA_Q8_F'],
                f: 'QA_Q8_FT'
            }, {
                q: 'QA_Q9',
                a: ['QA_Q9_T', 'QA_Q9_F'],
                f: 'QA_Q9_FT'
            }, {
                q: 'QA_Q10',
                a: ['QA_Q10_T', 'QA_Q10_F'],
                f: 'QA_Q10_FT'
            }];
            qaArray.sort((a, b) => {
                return Math.random() - 0.5;
            });
            qaArray.forEach((item) => {
                item.a.sort((a, b) => {
                    return Math.random() - 0.5;
                })
            })
            return qaArray
        }
        function setQa(props) {
            let [qaArray, index] = props;  // å› ç‚ºæ“”å¿ƒä½¿ç”¨IMGä¸€é–‹å§‹æœƒæœ‰éŒ¯åœ–è­¦å‘Šï¼Œå› æ­¤é¸ç”¨background image
            ques.style = "background-image:url(./images/" + qaArray[index].q + ".png)";
            ansA.style = "background-image:url(./images/" + qaArray[index].a[0] + ".png)";
            ansB.style = "background-image:url(./images/" + qaArray[index].a[1] + ".png)";
            ansA.dataset.answer = qaArray[index].a[0].substr(-1, 1);
            ansB.dataset.answer = qaArray[index].a[1].substr(-1, 1);
            correct_ans.style = "background-image:url(./images/" + qaArray[index].f + ".png)";
        }

        // let obj = {
		// 	q: 'QA_Q10',
		// 	a: [{png : 'QA_Q10_T',ans: true}, {png: 'QA_Q10_F', ans : false}],
		// 	f: 'QA_Q10_FT'
		// };
        //  let ans = obj.css("background-image").split("/").reverse()[0].split(".png")[0].slice(-1);
        //  'url("http://127.0.0.1:5500/game/QA_Q9_T.png")'
        // ['url("http:',"",'127.0.0.1:5500','game','QA_Q9_T.png']
        // Math.random
    </script>
</body>

</html>